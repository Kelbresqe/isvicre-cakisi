{# Pipeline Suggestions Component (v0.8.0) #}
{# 
  Shows suggested next tools when a pipeline file is available.
  
  Required context:
  - tool: ToolInfo object (current tool)
  - pipeline_id: Pipeline file ID (optional)
  - request: FastAPI Request
#}

{% if pipeline_id and tool.produces_pipeline_files and tool.suggested_next %}
<div class="mt-8 bg-gradient-to-r from-emerald-900/30 to-blue-900/30 rounded-2xl p-6 border border-emerald-500/30 animate-fade-in">
    <div class="flex items-center gap-3 mb-4">
        <div class="p-2 bg-emerald-500/20 rounded-lg">
            <svg class="w-6 h-6 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
            </svg>
        </div>
        <div>
            <h3 class="text-xl font-bold text-white">Sıradaki Mantıklı Adımlar</h3>
            <p class="text-sm text-slate-400">İşlediğiniz dosya ile devam edebilirsiniz</p>
        </div>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {% for relation in tool.suggested_next %}
        <a href="/tools/{{ relation.slug }}/?pipeline_id={{ pipeline_id }}&from={{ tool.slug }}" 
           class="group flex items-center gap-4 p-4 bg-slate-800/50 rounded-xl hover:bg-slate-700/50 border border-slate-600/50 hover:border-emerald-500/50 transition-all duration-200">
            <div class="flex-shrink-0 w-12 h-12 bg-emerald-500/20 rounded-lg flex items-center justify-center group-hover:bg-emerald-500/30 transition-colors">
                <svg class="w-6 h-6 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                </svg>
            </div>
            <div class="flex-1 min-w-0">
                <h4 class="font-semibold text-white group-hover:text-emerald-400 transition-colors truncate">
                    {{ relation.label }}
                </h4>
                <p class="text-sm text-slate-400 line-clamp-2">{{ relation.description }}</p>
            </div>
            <svg class="w-5 h-5 text-slate-500 group-hover:text-emerald-400 transition-colors flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
            </svg>
        </a>
        {% endfor %}
    </div>
    
    <div class="mt-4 flex items-start gap-2 p-3 bg-blue-900/20 rounded-lg border border-blue-500/20">
        <svg class="w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <p class="text-sm text-blue-300">
            Dosyanız pipeline'da hazır. Yukarıdaki araçlardan birine tıklayarak otomatik olarak yüklenecek.
        </p>
    </div>
</div>
{% elif tool.suggested_next and not pipeline_id %}
{# Show suggestions without pipeline - just informational #}
<div class="mt-8 bg-slate-800/30 rounded-xl p-5 border border-slate-700/50">
    <h4 class="text-base font-semibold text-slate-300 mb-3 flex items-center gap-2">
        <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        İlgili Araçlar
    </h4>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
        {% for relation in tool.suggested_next %}
        <a href="/tools/{{ relation.slug }}/" 
           class="flex items-center gap-2 px-3 py-2 bg-slate-700/30 hover:bg-slate-700/50 rounded-lg border border-slate-600/30 hover:border-slate-500/50 transition-all text-sm">
            <span class="text-slate-300 hover:text-white transition-colors">{{ relation.label }}</span>
            <svg class="w-4 h-4 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </a>
        {% endfor %}
    </div>
</div>
{% endif %}
