{% macro render(tool) %}
{% set search_text = tool.title ~ " " ~ (tool.short_description or tool.description) %}
<a href="/tools/{{ tool.slug }}/" 
   x-show="match(`{{ search_text|replace('`', '') }}`)"
   class="group relative bg-white dark:bg-slate-800/50 hover:bg-gray-50 dark:hover:bg-slate-800 border border-gray-200 dark:border-slate-700/50 hover:border-emerald-500/50 rounded-xl overflow-hidden transition-all duration-300 hover:-translate-y-1 hover:shadow-lg hover:shadow-emerald-900/20 flex flex-col h-full focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 dark:focus:ring-offset-slate-900"
   aria-label="{{ tool.title }}: {{ tool.short_description or tool.description }}">
    
    <!-- Card Image -->
    {% if tool.image_url %}
    <div class="h-40 w-full overflow-hidden relative">
        <img src="{{ tool.image_url }}" alt="{{ tool.title }} aracı görseli" class="w-full h-full object-cover transform group-hover:scale-105 transition-transform duration-500" loading="lazy">
        <div class="absolute inset-0 bg-gradient-to-t from-white dark:from-slate-900 via-white/20 dark:via-slate-900/20 to-transparent opacity-80" aria-hidden="true"></div>
    </div>
    {% endif %}

    <div class="p-5 flex flex-col flex-grow relative">
        <div class="flex items-start justify-between mb-4">
            <div class="p-2.5 bg-gray-100 dark:bg-slate-900/80 backdrop-blur rounded-lg text-emerald-600 dark:text-emerald-400 group-hover:text-emerald-500 dark:group-hover:text-emerald-300 group-hover:scale-110 transition-all duration-300 border border-gray-200 dark:border-slate-700/50" aria-hidden="true">
                <div class="w-6 h-6">
                    {{ tool.icon|safe }}
                </div>
            </div>
            <div class="opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 dark:text-slate-500" aria-hidden="true">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
            </div>
        </div>
        
        <h3 class="text-lg font-bold text-gray-900 dark:text-white mb-2 group-hover:text-emerald-600 dark:group-hover:text-emerald-400 transition-colors">
            {{ tool.title }}
        </h3>
        
        <p class="text-sm text-gray-600 dark:text-slate-400 line-clamp-2 mb-4 flex-grow">
            {{ tool.short_description or tool.description }}
        </p>
        
        {% if tool.detailed_description %}
        <!-- Info Icon with Tooltip -->
        <div class="absolute bottom-3 right-3" 
             x-data="{ show: false }"
             @mouseenter="show = true"
             @mouseleave="show = false"
             @focus="show = true"
             @blur="show = false"
             @click.prevent="">
            <div class="relative">
                <button type="button"
                        class="w-6 h-6 rounded-full bg-gray-100 dark:bg-slate-700/50 hover:bg-emerald-50 dark:hover:bg-emerald-500/20 border border-gray-200 dark:border-slate-600 hover:border-emerald-500 flex items-center justify-center cursor-help transition-all focus:outline-none focus:ring-2 focus:ring-emerald-500"
                        aria-label="Detaylı bilgi: {{ tool.detailed_description|truncate(50) }}"
                        tabindex="0">
                    <svg class="w-3.5 h-3.5 text-gray-400 dark:text-slate-400 hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                    </svg>
                </button>
                <!-- Tooltip -->
                <div x-show="show" 
                     x-transition
                     role="tooltip"
                     class="absolute bottom-full right-0 mb-2 w-72 p-3 bg-white dark:bg-slate-900 border border-gray-200 dark:border-emerald-500/50 rounded-lg shadow-xl z-50 pointer-events-none">
                    <div class="text-xs text-slate-300 leading-relaxed">
                        {{ tool.detailed_description }}
                    </div>
                    <!-- Arrow -->
                    <div class="absolute top-full right-3 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-emerald-500/50" style="margin-top: -1px;"></div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</a>
{% endmacro %}
