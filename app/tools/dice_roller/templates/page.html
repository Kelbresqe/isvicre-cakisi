{% extends "components/tool_layout.html" %}

{% block tool_content %}
<div class="space-y-6">
    <!-- Quick Roll Buttons -->
    <div class="bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 transition-colors duration-300">
        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">âš¡ HÄ±zlÄ± Zar At</h3>
        <div class="flex flex-wrap gap-3">
            {% for dice in dice_types %}
            <button
                type="button"
                hx-post="/tools/dice-roller/roll"
                hx-vals='{"dice_type": "{{ dice }}", "count": 1, "modifier": 0}'
                hx-target="#result-area"
                hx-swap="innerHTML"
                class="dice-btn px-4 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-bold rounded-lg hover:from-indigo-600 hover:to-purple-700 transform hover:scale-105 transition-all duration-200 shadow-md uppercase"
            >
                {{ dice }}
            </button>
            {% endfor %}
        </div>
    </div>

    <!-- Custom Roll Form -->
    <div class="bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 transition-colors duration-300">
        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">ðŸŽ² Ã–zel AtÄ±ÅŸ</h3>
        
        <!-- Notation Input -->
        <form hx-post="/tools/dice-roller/roll" hx-target="#result-area" hx-swap="innerHTML" class="space-y-4">
            <div>
                <label for="notation" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Zar Notasyonu
                    <span class="text-gray-400 dark:text-gray-500 font-normal">(Ã¶rn: 2d6+3, 4d6kh3, 1d20-2)</span>
                </label>
                <div class="flex gap-2">
                    <input
                        type="text"
                        id="notation"
                        name="notation"
                        placeholder="2d6+3"
                        class="flex-1 px-4 py-3 border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-lg font-mono text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"
                    >
                    <button
                        type="submit"
                        class="px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-lg hover:from-green-600 hover:to-emerald-700 transform hover:scale-105 transition-all duration-200 shadow-md"
                    >
                        ðŸŽ² At!
                    </button>
                </div>
            </div>
        </form>

        <!-- Divider -->
        <div class="relative my-6">
            <div class="absolute inset-0 flex items-center">
                <div class="w-full border-t border-gray-300 dark:border-slate-600"></div>
            </div>
            <div class="relative flex justify-center text-sm">
                <span class="px-2 bg-white dark:bg-slate-800 text-gray-500 dark:text-gray-400">veya</span>
            </div>
        </div>

        <!-- Manual Selection -->
        <form hx-post="/tools/dice-roller/roll" hx-target="#result-area" hx-swap="innerHTML" class="space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <!-- Dice Count -->
                <div>
                    <label for="count" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Zar SayÄ±sÄ±
                    </label>
                    <input
                        type="number"
                        id="count"
                        name="count"
                        value="1"
                        min="1"
                        max="100"
                        class="w-full px-4 py-3 border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center text-lg text-gray-900 dark:text-white"
                    >
                </div>

                <!-- Dice Type -->
                <div>
                    <label for="dice_type" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Zar Tipi
                    </label>
                    <select
                        id="dice_type"
                        name="dice_type"
                        class="w-full px-4 py-3 border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-lg text-gray-900 dark:text-white"
                    >
                        {% for dice in dice_types %}
                        <option value="{{ dice }}" {% if dice == 'd20' %}selected{% endif %}>{{ dice|upper }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Modifier -->
                <div>
                    <label for="modifier" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Modifiye
                    </label>
                    <input
                        type="number"
                        id="modifier"
                        name="modifier"
                        value="0"
                        min="-100"
                        max="100"
                        class="w-full px-4 py-3 border border-gray-300 dark:border-slate-600 bg-white dark:bg-slate-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-center text-lg text-gray-900 dark:text-white"
                    >
                </div>
            </div>

            <button
                type="submit"
                class="w-full px-6 py-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-bold rounded-lg hover:from-indigo-600 hover:to-purple-700 transform hover:scale-[1.02] transition-all duration-200 shadow-lg text-lg"
            >
                ðŸŽ² ZarlarÄ± At!
            </button>
        </form>
    </div>

    <!-- Result Area -->
    <div id="result-area">
        <!-- Results will be loaded here via HTMX -->
        <div class="bg-gray-50 dark:bg-slate-700/50 rounded-xl p-8 text-center text-gray-400 dark:text-gray-500">
            <div class="text-6xl mb-4">ðŸŽ²</div>
            <p>Zar atmak iÃ§in yukarÄ±daki butonlarÄ± kullanÄ±n veya bir notasyon girin.</p>
        </div>
    </div>

    <!-- Notation Help -->
    <div class="bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 transition-colors duration-300">
        <h3 class="text-lg font-semibold text-gray-800 dark:text-white mb-4">ðŸ“– Zar Notasyonu Rehberi</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
            <div class="space-y-2">
                <div class="flex justify-between p-2 bg-gray-50 dark:bg-slate-700/50 rounded">
                    <code class="font-mono text-indigo-600 dark:text-indigo-400">1d20</code>
                    <span class="text-gray-600 dark:text-gray-400">1 adet D20 at</span>
                </div>
                <div class="flex justify-between p-2 bg-gray-50 dark:bg-slate-700/50 rounded">
                    <code class="font-mono text-indigo-600 dark:text-indigo-400">2d6+3</code>
                    <span class="text-gray-600 dark:text-gray-400">2 adet D6 at, +3 ekle</span>
                </div>
                <div class="flex justify-between p-2 bg-gray-50 dark:bg-slate-700/50 rounded">
                    <code class="font-mono text-indigo-600 dark:text-indigo-400">1d20-2</code>
                    <span class="text-gray-600 dark:text-gray-400">D20 at, 2 Ã§Ä±kar</span>
                </div>
            </div>
            <div class="space-y-2">
                <div class="flex justify-between p-2 bg-gray-50 dark:bg-slate-700/50 rounded">
                    <code class="font-mono text-indigo-600 dark:text-indigo-400">4d6kh3</code>
                    <span class="text-gray-600 dark:text-gray-400">4 D6 at, en yÃ¼ksek 3'Ã¼ tut</span>
                </div>
                <div class="flex justify-between p-2 bg-gray-50 dark:bg-slate-700/50 rounded">
                    <code class="font-mono text-indigo-600 dark:text-indigo-400">2d20kl1</code>
                    <span class="text-gray-600 dark:text-gray-400">Disadvantage (en dÃ¼ÅŸÃ¼ÄŸÃ¼ al)</span>
                </div>
                <div class="flex justify-between p-2 bg-gray-50 dark:bg-slate-700/50 rounded">
                    <code class="font-mono text-indigo-600 dark:text-indigo-400">8d6</code>
                    <span class="text-gray-600 dark:text-gray-400">Fireball hasarÄ± ðŸ”¥</span>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
